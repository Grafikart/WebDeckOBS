var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,s=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,c=(e,c)=>{for(var a in c||(c={}))t.call(c,a)&&s(e,a,c[a]);if(n)for(var a of n(c))r.call(c,a)&&s(e,a,c[a]);return e};import{j as a,r as l,I as o,a as u,b as i,c as m,d,e as f,f as E,g as p,h}from"./vendor.b9b2e50b.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const r=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,c)=>{const a=new URL(e,r);if(self[t].moduleMap[a])return n(self[t].moduleMap[a]);const l=new Blob([`import * as m from '${a}';`,`${t}.moduleMap['${a}']=m;`],{type:"text/javascript"}),o=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){c(new Error(`Failed to import: ${e}`)),s(o)},onload(){n(self[t].moduleMap[a]),s(o)}});document.head.appendChild(o)})),self[t].moduleMap={}}}("assets/");var g,b;function S(e){const t=new a("SHA-256","TEXT");return t.update(e),t.getHash("BYTES")}(b=g||(g={})).OK="ok",b.ERROR="error";let w=1;class v extends class{constructor(){this.listeners={}}on(e,t){const n=this.listeners[e]||[];this.listeners[e]=[...n,t]}off(e,t){const n=this.listeners[e]||[];this.listeners[e]=n.filter((e=>e!==t))}emit(e,t){(this.listeners[e]||[]).forEach((e=>e(t)))}destroy(){this.listeners={}}}{constructor(){super(...arguments),this.messageCallbacks={}}connect(e="localhost:4444",t=""){const n=this;return new Promise((function(r,s){n.ws=new WebSocket(`ws://${e}`),n.ws.onopen=()=>{n.send("GetAuthRequired",{},(function(e){const c=t+e.salt,a=btoa(S(c)),l=btoa(S(a+e.challenge));n.send("Authenticate",{auth:l},(e=>{e.status===g.ERROR&&s(e.error),r()}))}))},n.ws.onerror=e=>{s(e)},n.ws.onmessage=e=>{const t=JSON.parse(e.data),r=n.messageCallbacks[t["message-id"]];r&&r(t),t["update-type"]&&n.emit(t["update-type"],t)}}))}on(e,t){return super.on(e,t),()=>{super.off(e,t)}}send(e,t,n){const r=w++;n&&(this.messageCallbacks[r]=n),this.ws.send(JSON.stringify(c({"request-type":e,"message-id":r.toString()},t)))}destroy(){this.ws.close(),super.destroy()}}const y=l.createContext({scenes:[],obsRef:{current:new v},currentScene:""});function C(e,t){var n,r;let s=(null==(n=function(e){return l.useContext(y).scenes.find((t=>t.name===e))}(e))?void 0:n.sources)||[];return t&&(s=(null==(r=s.find((e=>e.name===t)))?void 0:r.groupChildren)||[]),s}function R(){return l.useContext(y).obsRef.current}function j({children:e,hostname:t,password:n}){const[r,s]=l.useState([]),[c,a]=l.useState(""),o=l.useRef(new v);return l.useEffect((function(){const e=o.current,r=e=>{a(e["scene-name"])};return e.connect(t,n).then((()=>{e.send("GetSceneList",{},(e=>{s(e.scenes),a(e["current-scene"])}))})),e.on("SwitchScenes",r),()=>{e.off("SwitchScenes",r)}}),[]),l.createElement(y.Provider,{value:{scenes:r,obsRef:o,currentScene:c}},e)}function O({children:e}){return l.createElement("div",{className:"grid"},e)}var N,k,P,M;function T(e){var{color:s=N.grey,children:a}=e,o=((e,s)=>{var c={};for(var a in e)t.call(e,a)&&s.indexOf(a)<0&&(c[a]=e[a]);if(null!=e&&n)for(var a of n(e))s.indexOf(a)<0&&r.call(e,a)&&(c[a]=e[a]);return c})(e,["color","children"]);const u=s!==N.grey?{background:`var(--${s})`}:void 0;return l.createElement("button",c({className:`button is-${s}`,style:u},o),a)}function x({name:e}){switch(e){case P.scene:return l.createElement(p,null);case P.sound:return l.createElement(E,null);case P.music:return l.createElement(f,null);case P.tchat:return l.createElement(d,null);case P.zoom:return l.createElement(m,null);case P.left:return l.createElement(i,null);case P.right:return l.createElement(u,null);case P.camera:return l.createElement(o,null)}return null}function L({ignore:e="ðŸ“¦"}){const t=l.useContext(y).scenes;return l.createElement(l.Fragment,null,t.filter((t=>!t.name.startsWith(e))).map((e=>l.createElement(F,{key:e.name,scene:e.name}))))}function F({scene:e}){const t=l.useContext(y).currentScene,n=R();return l.createElement(T,{color:t===e?N.blue:void 0,onClick:()=>{n.send("SetCurrentScene",{"scene-name":e})}},l.createElement(x,{name:P.scene}),l.createElement("span",null,e))}(k=N||(N={})).blue="blue",k.red="red",k.yellow="yellow",k.purple="purple",k.green="green",k.grey="grey",(M=P||(P={})).scene="scene",M.sound="sound",M.music="music",M.tchat="tchat",M.zoom="zoom",M.left="left",M.right="right",M.camera="camera";const U={"C'est nul":"assets/cest-nul.3d0c5824.jpg",Travail:"assets/travail.5d4d612e.jpg","Travail termine":"assets/travail.5d4d612e.jpg","ah !":"assets/denis.00354ae5.jpg",sad:"assets/sad.29e5cf6c.jpg",Ascenseur:"assets/elevator.ca4ce089.jpg"};function $({scene:e,group:t,icon:n}){const r=C(e,t);return l.createElement(l.Fragment,null,r.map((e=>l.createElement(z,{name:e.name,key:e.name,icon:n}))))}function z({name:e,icon:t=P.sound}){const n=R(),[r,s]=l.useState(!1);l.useEffect((()=>{const t=n.on("MediaRestarted",(t=>{t.sourceName===e&&s(!0)})),r=n.on("MediaEnded",(t=>{t.sourceName===e&&(s(!1),n.send("SetSceneItemProperties",{item:e,visible:!1}))}));return()=>{t(),r()}}));const c=U[e];return l.createElement(T,{color:r?N.green:N.purple,onClick:()=>{n.send("SetSceneItemProperties",{item:e,visible:!r})}},l.createElement(x,{name:t}),l.createElement("span",null,e),l.createElement("img",{src:c,alt:""}))}function A({scene:e,filters:t=["show","hide"],children:n,colors:r=[N.blue,N.grey]}){const[s,c]=l.useState(0),a=R();return l.createElement(T,{color:r[s],onClick:()=>{const n=s+1>=t.length?0:s+1;a.send("SetSourceFilterVisibility",{sourceName:e,filterName:t[n],filterEnabled:!0}),c(n)}},n)}function I({scene:e,filter:t,children:n}){const r=R(),[s,c]=l.useState(!1);return l.useEffect((()=>r.on("SourceFilterVisibilityChanged",(n=>{n.sourceName===e&&n.filterEnabled&&c(n.filterName===t)}))),[t]),l.createElement(T,{color:s?N.green:N.blue,onClick:()=>{r.send("SetSourceFilterVisibility",{sourceName:e,filterName:t,filterEnabled:!s})}},n)}function _(){const e=R();return l.useEffect((()=>{e.on("TransitionEnd",(t=>{"Stream"===t["to-scene"]?e.send("SetCurrentTransition",{"transition-name":"Move"}):["Soon","Pause",""].includes(t["to-scene"])&&e.send("SetCurrentTransition",{"transition-name":"Courbes"})}))}),[]),null}function B({children:e}){const t={"--columns":l.Children.toArray(e).length.toString()};return l.createElement("div",{className:"buttons",style:t},e)}function V({children:e}){return l.createElement("div",{className:"row"},e)}const q=new URL(window.location.href),G=q.searchParams.get("host")||"192.168.0.50:4444",H=q.searchParams.get("password")||"";h.render(l.createElement(l.StrictMode,null,l.createElement(j,{hostname:G,password:H},l.createElement(O,null,l.createElement(V,null,l.createElement(L,null)),l.createElement(V,null,l.createElement(A,{scene:"ðŸ“¦ Tchat"},l.createElement(x,{name:P.tchat}),l.createElement("span",null,"Tchat")),l.createElement(B,null,l.createElement(I,{scene:"Stream",filter:"zoom"},l.createElement(x,{name:P.zoom}),l.createElement("span",null,"Zoomer")),l.createElement(I,{scene:"Stream",filter:"left"},l.createElement(x,{name:P.left}),l.createElement("span",null,"Ã€ gauche")),l.createElement(I,{scene:"Stream",filter:"default"},l.createElement(x,{name:P.right}),l.createElement("span",null,"Ã€ droite")))),l.createElement(V,null,l.createElement($,{scene:"Stream",group:"Sounds"})),l.createElement(V,null,l.createElement($,{scene:"Stream",group:"Music",icon:P.music})),l.createElement(_,null)))),document.getElementById("root"));
